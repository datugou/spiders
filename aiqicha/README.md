# 爱企查爬虫
2021.01.25

---
根据关键词检索，抓取相关企业的信息。

## 爬虫说明

目前如果不进行验证码验证每个 ip 短时间只能访问 1 次。
等有空写个验证码验证代码。
或者有好心人提交一下。

### spider_aiqicha_search_result.py

根据搜索关键词，抓取相关的企业目录，该目录数据包含也包含了很多信息。
是 json 格式的，有兴趣自己去解析看看有哪些信息。
<div align=center><img src="https://s3.ax1x.com/2021/01/25/sLqpK1.png" width = '700'></div>

### spider_aiqicha_detail.py

根据上面那个爬虫爬到的目录信息，可以获取企业的 pid，然后构造企业详情页的链接去抓数据。
我这里构造的链接'https://aiqicha.baidu.com/detail/basicAllDataAjax?pid=%s'%(pid)
不是真实的详情页，而是详情页里面的一个数据接口，也是 json 格式的，应该包含了企业的所有基本信息。

真实的详情页链接是类似这样的：
- https://aiqicha.baidu.com/detail/compinfo?pid=25802052262730

有兴趣可以去分析一下。

## 爱企查网站反爬虫规则说明
1. 不需要登录即可访问。
2. 没有全库列表，需要用关键词检索，获取相关企业列表，单个检索条件最多显示 1000 个企业。
3. ~~同一 ip 每分钟访问超过 10 次，会被暂时禁用，会触发验证码识别，大概等 1 分钟后就解除，再访问时不用验证码了。~~ 目前如果不进行验证码验证每个 ip 短时间只能访问 1 次。

解决思路：
1. 白给的。
2. 只能用关键词搜索，没办法爬取全库，当检索词搜索结果大于 1000 条时，可以添加筛选条件，把结果拆分成更小的组，如果所有条件都加了还大于 1000 条，那就没办法了。
![](https://s3.ax1x.com/2021/01/25/sLb7D0.png)
3. 一、数据量不大，不怕慢的可以每分钟抓 ~~10~~ 1 条数据；二、用代理池去抓；三、突破验证码（本项目未实现该方法）。

---
[返回首页](https://github.com/datugou/spiders)
